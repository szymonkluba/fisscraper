"use strict";(self.webpackChunkfis_scraper_frontend=self.webpackChunkfis_scraper_frontend||[]).push([[592],{5150:(w,f,i)=>{i.d(f,{o:()=>I});var l=(()=>{return(n=l||(l={})).PROGRESS="in_progress",n.SUCCESS="success",n.ERROR="error",l;var n})(),d=i(7579),m=i(2722),t=i(5e3),p=i(1040),a=i(9224),c=i(9808),u=i(4834),g=i(3874),_=i(7423),v=i(7238),x=i(5899);function E(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.file.fis_id," ")}}function C(n,s){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1," folder_special "),t.qZA())}function h(n,s){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1," description "),t.qZA())}function Z(n,s){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,C,2,0,"mat-icon",2),t.YNc(2,h,2,0,"ng-template",null,9,t.W1O),t._uU(4),t.qZA()),2&n){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",".ZIP"===o.file.name.slice(o.file.name.length-4).toUpperCase())("ngIfElse",e),t.xp6(3),t.hij(" ",o.file.name.slice(o.file.name.length-4).toUpperCase()," ")}}function b(n,s){if(1&n&&(t.TgZ(0,"mat-card-content"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.file.name)}}function O(n,s){if(1&n&&(t.TgZ(0,"mat-card-content",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.file.name)}}function T(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().download()}),t._uU(1," DOWNLOAD "),t.TgZ(2,"mat-icon"),t._uU(3,"save_alt"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("matTooltip","Download "+e.file.name)}}function y(n,s){if(1&n&&t._UZ(0,"mat-progress-bar",12),2&n){const e=s.ngIf;t.Q6J("mode","PENDING"===e.state?"buffer":"determinate")("value",e.progress)("color","DONE"===e.state||"IN_PROGRES"===e.state?"accent":"warn")}}let I=(()=>{class n{constructor(e){this.dropbox=e,this.fileStatuses=l,this.subscriptionEndSubject=new d.x,this.subscriptionEnd$=this.subscriptionEndSubject.asObservable()}ngOnInit(){}download(){console.log("in download",this.file),this.download$=this.dropbox.downloadFile(this.file),this.file.fis_id&&this.download$.pipe((0,m.R)(this.subscriptionEnd$)).subscribe()}ngOnDestroy(){this.subscriptionEndSubject.next(null),this.subscriptionEndSubject.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-file-entry"]],inputs:{file:"file"},decls:13,vars:8,consts:[[4,"ngIf"],["class","file-icon",4,"ngIf"],[4,"ngIf","ngIfElse"],["errorMessage",""],["inset",""],["align","end"],["mat-button","",3,"matTooltip","click",4,"ngIf"],[3,"mode","value","color",4,"ngIf"],[1,"file-icon"],["regularIcon",""],[1,"error-message"],["mat-button","",3,"matTooltip","click"],[3,"mode","value","color"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-subtitle"),t.YNc(2,E,2,1,"div",0),t.YNc(3,Z,5,3,"div",1),t.qZA(),t.YNc(4,b,2,1,"mat-card-content",2),t.YNc(5,O,2,1,"ng-template",null,3,t.W1O),t._UZ(7,"mat-divider",4),t.TgZ(8,"mat-card-actions",5),t.YNc(9,T,4,1,"button",6),t.qZA(),t.TgZ(10,"mat-card-footer"),t.YNc(11,y,1,3,"mat-progress-bar",7),t.ALo(12,"async"),t.qZA(),t.qZA()),2&e){const r=t.MAs(6);t.xp6(2),t.Q6J("ngIf",o.file.fis_id),t.xp6(1),t.Q6J("ngIf",o.file.name&&o.file.status!==o.fileStatuses.ERROR),t.xp6(1),t.Q6J("ngIf",o.file.status!==o.fileStatuses.ERROR)("ngIfElse",r),t.xp6(5),t.Q6J("ngIf",!o.file.status||o.file.status===o.fileStatuses.SUCCESS),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,6,o.download$))}},directives:[a.a8,a.$j,c.O5,u.d,a.hq,a.rt,g.Hw,a.dn,_.lW,v.gM,x.pW],pipes:[c.Ov],styles:["mat-card[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}mat-card-content[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}mat-card-subtitle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}mat-card[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{display:block;margin:auto 0 0}.file-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.file-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.error-message[_ngcontent-%COMP%]{color:red}"],changeDetection:0}),n})()}}]);