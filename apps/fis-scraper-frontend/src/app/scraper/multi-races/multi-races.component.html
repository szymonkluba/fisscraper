<form class="multi-races-form">
  <h2>Scrap multiple races</h2>
  <mat-form-field appearance="outline">
    <mat-label>FIS ID</mat-label>
    <mat-chip-grid
      #racesGrid
      aria-label="Enter FIS Ids"
      [formControl]="racesFormControl">
      <mat-chip-row
        *ngFor="let race of races; trackBy: trackByIndex"
        (removed)="removeRace(race)"
        [highlighted]="race.details"
        (click)="changeDetailsState(race)"
        [editable]="false">
        {{ race.fis_id }}
        <button matChipRemove>
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-chip-row>
    </mat-chip-grid>
    <input
      matInput
      [matChipInputFor]="racesGrid"
      [matChipInputSeparatorKeyCodes]="separatorKeyCodes"
      [matChipInputAddOnBlur]="true"
      (matChipInputTokenEnd)="addRace($event)" />
    <mat-error *ngIf="racesFormControl | hasError: 'required'">
      FIS ID is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-slide-toggle (change)="onDetailsToggleChange($event)"
    >Details</mat-slide-toggle
  >
  <button
    class="multi-races-form-submit"
    mat-raised-button
    color="primary"
    (click)="submit()"
    [disabled]="races.length === 0">
    Scrap!
  </button>
</form>
<mat-progress-bar
  *ngIf="overallProgress$ | async as overallProgress"
  color="accent"
  [value]="progress$ | async"
  [bufferValue]="overallProgress"
  mode="buffer"></mat-progress-bar>
