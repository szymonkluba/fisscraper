<ng-container *ngIf="notifications$ | async as notifications">
  <button
    mat-icon-button
    [matMenuTriggerFor]="notificationsContainer"
    [matBadge]="
      notifications.length - read === 0 ? null : notifications.length - read
    "
    [matBadgeHidden]="notifications.length - read === 0"
    matBadgePosition="after"
    matBadgeColor="warn"
    matTooltip="Notifications"
    (click)="markAsRead()">
    <mat-icon>{{
      notifications.length ? 'notifications_active' : 'notifications'
    }}</mat-icon>
  </button>
  <mat-menu #notificationsContainer xPosition="before" yPosition="below">
    <ng-container *ngIf="notifications.length === 0; else notificationList">
      <p class="no-notifications">Nothing to report.</p>
    </ng-container>
    <ng-template #notificationList>
      <app-notification
        *ngFor="let notification of notifications; trackBy: trackByIndex"
        [notification]="notification"></app-notification>
    </ng-template>
  </mat-menu>
</ng-container>
