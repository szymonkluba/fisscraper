"use strict";(self.webpackChunkfis_scraper_frontend=self.webpackChunkfis_scraper_frontend||[]).push([[334],{8334:(le,I,i)=>{i.r(I),i.d(I,{ScraperModule:()=>ce});var s=i(9808),p=i(3007),m=i(9244),e=i(5e3),u=i(9224),C=i(3251),d=i(9633);const A=(0,d.ZF)("files"),R=(0,d.ZF)("spinner");var F=i(1040),N=i(4834),g=i(7423),U=i(7238),T=i(3874),f=i(5899),b=i(5150),x=i(4518);function S(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"mat-card-actions",5),e.TgZ(1,"button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().ngIf;return e.oxw().downloadAll(l)}),e._uU(2," DOWNLOAD ALL "),e.TgZ(3,"mat-icon"),e._uU(4," save_alt "),e.qZA(),e.qZA(),e.qZA()}}function J(r,o){if(1&r&&e._UZ(0,"mat-progress-bar",7),2&r){const t=o.ngIf;e.Q6J("mode","PENDING"===t.state?"buffer":"determinate")("value",t.progress)("color","DONE"===t.state||"IN_PROGRES"===t.state?"accent":"warn")}}function q(r,o){1&r&&e._UZ(0,"app-file-entry",8),2&r&&e.Q6J("file",o.$implicit)}function y(r,o){1&r&&e._UZ(0,"app-file-spinner")}function E(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-title"),e._uU(3,"Current files:"),e.qZA(),e.YNc(4,S,5,0,"mat-card-actions",1),e.YNc(5,J,1,3,"mat-progress-bar",2),e.ALo(6,"async"),e._UZ(7,"mat-divider",3),e.TgZ(8,"mat-card-content"),e.YNc(9,q,1,1,"app-file-entry",4),e.YNc(10,y,1,0,"app-file-spinner",0),e.ALo(11,"async"),e.qZA(),e.qZA(),e.BQk()),2&r){const t=o.ngIf,a=e.oxw();e.xp6(4),e.Q6J("ngIf",t.length>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,4,a.download$)),e.xp6(4),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",e.lcZ(11,6,a.spinnerState$))}}let M=(()=>{class r{constructor(t,a){this.store=t,this.dropbox=a}ngOnInit(){this.files$=this.store.select(A),this.spinnerState$=this.store.select(R)}downloadAll(t){this.download$=this.dropbox.downloadCurrentFiles(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.yh),e.Y36(F.x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-current-files"]],decls:2,vars:3,consts:[[4,"ngIf"],["align","end",4,"ngIf"],[3,"mode","value","color",4,"ngIf"],["inset",""],[3,"file",4,"ngFor","ngForOf"],["align","end"],["mat-button","","matTooltip","Download all files as .zip",3,"click"],[3,"mode","value","color"],[3,"file"]],template:function(t,a){1&t&&(e.YNc(0,E,12,8,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,a.files$))},directives:[s.O5,u.a8,u.n5,N.d,u.dn,s.sg,u.hq,g.lW,U.gM,T.Hw,f.pW,b.o,x.i],pipes:[s.Ov],styles:["mat-card[_ngcontent-%COMP%]{width:min(70rem,100%);min-height:15rem;margin:2rem auto}mat-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-rows:12rem;grid-gap:2rem;gap:2rem}"],changeDetection:0}),r})();function O(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"a",2),e.NdJ("click",function(){const v=e.CHM(t).$implicit;return e.oxw().activeLink=v.path}),e._uU(1),e.qZA()}if(2&r){const t=o.$implicit,a=e.oxw();e.Q6J("active",a.activeLink==t.path)("routerLink",t.routerPath)("routerLinkActive",t.path===a.activeLink?"active":""),e.xp6(1),e.hij(" ",t.label," ")}}let Q=(()=>{class r{constructor(){this.links=[m.$.SINGLE_RACE,m.$.MULTI_RACES,m.$.RANGE_RACES],this.activeLink=window.location.pathname}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-scraper"]],decls:5,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","routerLinkActive","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","routerLinkActive","click"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"nav",0),e.YNc(2,O,2,4,"a",1),e.qZA(),e._UZ(3,"router-outlet"),e.qZA(),e._UZ(4,"app-current-files")),2&t&&(e.xp6(2),e.Q6J("ngForOf",a.links))},directives:[u.a8,C.BU,s.sg,p.lC,M,p.yS,C.Nj,p.Od],styles:["mat-card[_ngcontent-%COMP%]{margin:0 auto;width:100%;max-width:70rem}"]}),r})();var n=i(3075),Y=i(9646),_=i(7544),c=i(7322),Z=i(7531),h=i(2368);function k(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e._uU(4," greater than 0 "),e.qZA())}function L(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e.qZA())}function w(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," FIS ID is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function $(r,o){1&r&&e._UZ(0,"mat-progress-bar",7),2&r&&e.Q6J("value",100*o.ngIf)}function D(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e._uU(4," greater than 0 "),e.qZA())}function G(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e.qZA())}function B(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," FIS ID is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function W(r,o){if(1&r&&(e.TgZ(0,"div",8),e.TgZ(1,"mat-form-field",9),e.TgZ(2,"mat-label"),e._uU(3,"FIS ID"),e.qZA(),e._UZ(4,"input",10),e.YNc(5,D,5,0,"mat-error",11),e.YNc(6,G,4,0,"mat-error",11),e.YNc(7,B,4,0,"mat-error",11),e.qZA(),e.TgZ(8,"mat-slide-toggle",12),e._uU(9,"Details"),e.qZA(),e.qZA()),2&r){const t=o.index,a=e.oxw();e.Q6J("formGroupName",t),e.xp6(5),e.Q6J("ngIf",a.fisId[t].hasError("min")),e.xp6(1),e.Q6J("ngIf",a.fisId[t].hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.fisId[t].hasError("required"))}}function X(r,o){1&r&&e._UZ(0,"mat-progress-bar",13),2&r&&e.Q6J("value",o.ngIf)}function V(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e._uU(4," greater than 0 "),e.qZA())}function z(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e.qZA())}function H(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Initial FIS ID is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function K(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e._uU(4," greater than 0 "),e.qZA())}function ee(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Enter "),e.TgZ(2,"strong"),e._uU(3,"number"),e.qZA(),e.qZA())}function re(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Final FIS ID is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function te(r,o){1&r&&e._UZ(0,"mat-progress-bar",8),2&r&&e.Q6J("value",o.ngIf)}const oe=[{path:"",redirectTo:m.$.SINGLE_RACE.routerPath},{path:"",component:Q,children:[{path:m.$.SINGLE_RACE.routerPath,component:(()=>{class r{constructor(t,a){this.formBuilder=t,this.scraperService=a,this.fisId=new n.NI(0,[n.kI.required,n.kI.min(1),n.kI.pattern("[0-9]*")]),this.details=new n.NI(!1),this.progress$=(0,Y.of)(0),this.raceForm=this.formBuilder.group({fis_id:this.fisId,details:this.details})}submit(){this.progress$=this.scraperService.scrapRace(this.raceForm.value)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(_.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-single-race"]],decls:14,vars:7,consts:[[1,"single-race-form",3,"formGroup"],["appearance","fill"],["matInput","","type","number","formControlName","fis_id"],[4,"ngIf"],["formControlName","details"],["mat-raised-button","","color","primary",1,"single-race-form-submit",3,"click"],["color","accent","mode","buffer",3,"value",4,"ngIf"],["color","accent","mode","buffer",3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"mat-form-field",1),e.TgZ(2,"mat-label"),e._uU(3,"FIS ID"),e.qZA(),e._UZ(4,"input",2),e.YNc(5,k,5,0,"mat-error",3),e.YNc(6,L,4,0,"mat-error",3),e.YNc(7,w,4,0,"mat-error",3),e.qZA(),e.TgZ(8,"mat-slide-toggle",4),e._uU(9,"Details"),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return a.submit()}),e._uU(11,"Scrap!"),e.qZA(),e.qZA(),e.YNc(12,$,1,1,"mat-progress-bar",6),e.ALo(13,"async")),2&t&&(e.Q6J("formGroup",a.raceForm),e.xp6(5),e.Q6J("ngIf",a.fisId.hasError("min")),e.xp6(1),e.Q6J("ngIf",a.fisId.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.fisId.hasError("required")),e.xp6(5),e.Q6J("ngIf",e.lcZ(13,5,a.progress$)))},directives:[n._Y,n.JL,n.sg,c.KE,c.hX,Z.Nt,n.wV,n.Fj,n.JJ,n.u,s.O5,h.Rr,g.lW,c.TO,f.pW],pipes:[s.Ov],styles:[".single-race-form[_ngcontent-%COMP%]{width:min(40rem,100%);padding:3rem;display:flex;grid-gap:.5rem;gap:.5rem;flex-direction:column}.single-race-form-submit[_ngcontent-%COMP%]{margin-top:3rem}"]}),r})()},{path:m.$.MULTI_RACES.routerPath,component:(()=>{class r{constructor(t,a){this.formBuilder=t,this.scraperService=a,this.fisId=[],this.details=new n.NI(!1),this.raceForm=this.formBuilder.group({races:this.formBuilder.array([this.newRace()])})}races(){return this.raceForm.get("races")}newRace(){return this.fisId.push(new n.NI(0,[n.kI.required,n.kI.min(1),n.kI.pattern(/\d*/)])),this.formBuilder.group({fis_id:this.fisId[this.fisId.length-1],details:this.details})}addInput(){this.races().push(this.newRace())}removeInput(){this.fisId.pop(),this.races().removeAt(this.races().length-1)}submit(){this.progress$=this.scraperService.scrapMultipleRaces(this.races().value)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(_.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-multi-races"]],decls:14,vars:5,consts:[[3,"formGroup"],["formArrayName","races",1,"multi-races-form"],["class","multi-races-form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"multi-races-form-controls"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",1,"multi-races-form-submit",3,"click"],["color","accent","mode","buffer",3,"value",4,"ngIf"],[1,"multi-races-form-group",3,"formGroupName"],["appearance","fill"],["matInput","","type","number","formControlName","fis_id"],[4,"ngIf"],["formControlName","details"],["color","accent","mode","buffer",3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.YNc(2,W,10,4,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return a.addInput()}),e.TgZ(5,"mat-icon"),e._uU(6,"exposure_plus_1"),e.qZA(),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return a.removeInput()}),e.TgZ(8,"mat-icon"),e._uU(9,"exposure_neg_1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return a.submit()}),e._uU(11,"Scrap!"),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,X,1,1,"mat-progress-bar",7),e.ALo(13,"async")),2&t&&(e.Q6J("formGroup",a.raceForm),e.xp6(2),e.Q6J("ngForOf",a.races().controls),e.xp6(10),e.Q6J("ngIf",e.lcZ(13,3,a.progress$)))},directives:[n._Y,n.JL,n.sg,n.CE,s.sg,g.lW,T.Hw,s.O5,n.x0,c.KE,c.hX,Z.Nt,n.wV,n.Fj,n.JJ,n.u,h.Rr,c.TO,f.pW],pipes:[s.Ov],styles:[".multi-races-form[_ngcontent-%COMP%]{width:min(40rem,100%);padding:3rem;display:flex;grid-gap:1rem;gap:1rem;flex-direction:column}.multi-races-form-controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:.5rem;gap:.5rem}.multi-races-form-group[_ngcontent-%COMP%]{display:flex;grid-gap:.5rem;gap:.5rem;flex-direction:column}.multi-races-form-group[_ngcontent-%COMP%] + .multi-races-form-group[_ngcontent-%COMP%]{margin-block:.5rem}.multi-races-form-submit[_ngcontent-%COMP%]{margin-top:3rem}mat-suffix[_ngcontent-%COMP%]{max-height:2rem}"]}),r})()},{path:m.$.RANGE_RACES.routerPath,component:(()=>{class r{constructor(t,a){this.formBuilder=t,this.scraperService=a,this.startFisId=new n.NI(0,[n.kI.required,n.kI.min(1),n.kI.pattern(/\d*/)]),this.endFisId=new n.NI(0,[n.kI.required,n.kI.min(1),n.kI.pattern(/\d*/)]),this.details=new n.NI(!1),this.raceForm=this.formBuilder.group({start_fis_id:this.startFisId,end_fis_id:this.endFisId,details:this.details})}submit(){this.progress$=this.scraperService.scrapRangeOfRaces(this.raceForm.value)}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(_.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-range-races"]],decls:21,vars:10,consts:[[1,"range-races-form",3,"formGroup"],["appearance","fill"],["matInput","","type","number","formControlName","start_fis_id"],[4,"ngIf"],["matInput","","type","number","formControlName","end_fis_id"],["formControlName","details"],["mat-raised-button","","color","primary",1,"range-races-form-submit",3,"click"],["color","accent","mode","buffer",3,"value",4,"ngIf"],["color","accent","mode","buffer",3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"mat-form-field",1),e.TgZ(2,"mat-label"),e._uU(3,"Initial FIS ID"),e.qZA(),e._UZ(4,"input",2),e.YNc(5,V,5,0,"mat-error",3),e.YNc(6,z,4,0,"mat-error",3),e.YNc(7,H,4,0,"mat-error",3),e.qZA(),e.TgZ(8,"mat-form-field",1),e.TgZ(9,"mat-label"),e._uU(10,"Final FIS ID"),e.qZA(),e._UZ(11,"input",4),e.YNc(12,K,5,0,"mat-error",3),e.YNc(13,ee,4,0,"mat-error",3),e.YNc(14,re,4,0,"mat-error",3),e.qZA(),e.TgZ(15,"mat-slide-toggle",5),e._uU(16,"Details"),e.qZA(),e.TgZ(17,"button",6),e.NdJ("click",function(){return a.submit()}),e._uU(18,"Scrap!"),e.qZA(),e.qZA(),e.YNc(19,te,1,1,"mat-progress-bar",7),e.ALo(20,"async")),2&t&&(e.Q6J("formGroup",a.raceForm),e.xp6(5),e.Q6J("ngIf",a.startFisId.hasError("min")),e.xp6(1),e.Q6J("ngIf",a.startFisId.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.startFisId.hasError("required")),e.xp6(5),e.Q6J("ngIf",a.endFisId.hasError("min")),e.xp6(1),e.Q6J("ngIf",a.endFisId.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.endFisId.hasError("required")),e.xp6(5),e.Q6J("ngIf",e.lcZ(20,8,a.progress$)))},directives:[n._Y,n.JL,n.sg,c.KE,c.hX,Z.Nt,n.wV,n.Fj,n.JJ,n.u,s.O5,h.Rr,g.lW,c.TO,f.pW],pipes:[s.Ov],styles:[".range-races-form[_ngcontent-%COMP%]{width:min(40rem,100%);padding:3rem;display:flex;grid-gap:.5rem;gap:.5rem;flex-direction:column}.range-races-form-submit[_ngcontent-%COMP%]{margin-top:3rem}"]}),r})()}]}];let ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.Bz.forChild(oe)],p.Bz]}),r})();var ie=i(7325),se=i(4466);let ce=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[s.ez,ae,ie.h,n.u5,n.UX,n.u5,se.m]]}),r})()}}]);